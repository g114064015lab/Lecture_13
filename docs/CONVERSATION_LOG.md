# 對話紀錄摘要（截至目前）

> 記錄過往互動

1. **初版需求**：撰寫 README、以 Streamlit 建立天氣儀表板（F-A0021-001），並提供要求的 prompt。建立了 README、`app.py`、`requirements.txt` 等基本架構。
2. **TLS 問題**：API 連線遇到憑證驗證失敗（Missing Subject Key Identifier）。導入 `certifi` 並允許選擇性跳過驗證，以確保在限制環境下能取資料。
3. **36 小時預報**：再切回 F-A0021-001，保留 SQLite 快取。更新 README/ARCHITECTURE，確保 UI 顯示 36 小時時段卡片與折線圖。
4. **SSL 設定開關**：加入 `CWA_STRICT_SSL` 參數，預設忽略驗證以繞過 CWA 憑證問題；可在安全環境設為 `true` 強制驗證。
5. **內建樣本與潮汐解析**：新增官方範例檔 `F-A0021-001.json`，當 API 與快取皆失敗時使用。偵測資料類型並處理 TideForecasts（潮汐）或 weather 資料，調整卡片、圖表、表格欄位與單位。
6. **UI 改善**：縣市列表改為 `selectbox`，避免選項過長；其他細節保持深/淺色切換、手動更新與快取提示。
7. **資料庫快照**：安裝依賴後執行抓取，將最新回應寫入 SQLite `data.db`，並提交到 GitHub。
8. **地圖與版面優化**：新增臺灣概覽地圖，分級顯示潮汐強度，附圖例；重新排版，改用顏色圈圈呈現潮汐強度分級（0–30/30–60/60–90/>90%）於概覽與單點地圖。

